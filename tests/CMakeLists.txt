include(AwsTestHarness)
enable_testing()

file(GLOB TEST_SRC "*.c")
file(GLOB TEST_HDRS "*.h")
file(GLOB TESTS ${TEST_HDRS} ${TEST_SRC})

add_test_case(test_kms_decrypt_request_cipher_to_json)
add_test_case(test_kms_decrypt_request_ea_to_json)
add_test_case(test_kms_decrypt_request_context_to_json)
add_test_case(test_kms_decrypt_request_tokens_to_json)
add_test_case(test_kms_decrypt_request_to_json)
add_test_case(test_kms_decrypt_request_cipher_from_json)
add_test_case(test_kms_decrypt_request_ea_from_json)
add_test_case(test_kms_decrypt_request_context_from_json)
add_test_case(test_kms_decrypt_request_tokens_from_json)
add_test_case(test_kms_decrypt_request_from_json)
add_test_case(test_recipient_kea_to_json)
add_test_case(test_recipient_to_json)
add_test_case(test_recipient_kea_from_json)
add_test_case(test_recipient_from_json)
add_test_case(test_kms_decrypt_response_to_json)
add_test_case(test_kms_decrypt_response_from_json)
add_test_case(test_kms_generate_data_key_request_to_json)
add_test_case(test_kms_generate_data_key_request_from_json)
add_test_case(test_kms_generate_data_key_response_to_json)
add_test_case(test_kms_generate_data_key_response_from_json)
add_test_case(test_kms_generate_random_request_to_json)
add_test_case(test_kms_generate_random_request_from_json)
add_test_case(test_kms_generate_random_response_to_json)
add_test_case(test_kms_generate_random_response_from_json)
add_test_case(test_basic_rest_client)
add_test_case(test_rest_call_blocking)
add_test_case(test_cms_parsing_correctness)

set(TEST_BINARY_NAME ${PROJECT_NAME}-tests)
generate_test_driver(${TEST_BINARY_NAME})
